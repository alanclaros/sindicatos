{% extends 'base.html' %}

{% load humanize %}
{% load jinja_tags %}

{% block title %} | Zonas {% endblock %}

{% block content %}

<div class="row align-items-center">
    <div class="col-sm-2">&nbsp;</div>
    <div class="col-sm-8">
        <!--div contenedor-->
        <br>
        <!--alerts-->
        {% include 'partials/_alerts.html' %}

        <form name="search" method="post" action="">
            {% csrf_token %}
            <table class="table3 w-100">
                <tr>
                    <th class="w-100 center" colspan="4">
                        Opciones de Busqueda
                    </th>
                </tr>

                <tr class="back1">
                    <td class="right w-20">
                        Zona&nbsp;:&nbsp;
                    </td>
                    <td class="left w-30">
                        <input type="text" name="{{session.variable}}" class="form-control input w-80" value="{{ session|get_item:session.variable }}" autocomplete="off">
                    </td>
                    <td class="right w-20">
                        &nbsp;
                    </td>
                    <td class="left w-30">
                        &nbsp;
                    </td>
                </tr>

                <tr class="back2">
                    <td colspan="4" class="center w-100">
                        <input type="submit" name="search_button" value="Buscar" class="btn btn-primary btn-sm">
                        <input type="hidden" name="search_button_x" value="acc">
                    </td>
                </tr>
            </table>
        </form>
        <br>
        <!--paginacion-->
        {% include 'partials/pagination.html' %}

        {%if permisos.adicionar == 1 %}
        <table class="tabla w-100">
            <td class="left w-100">
                <input type="button" name="add_x" value="Nueva Zona" class="btn btn-primary btn-sm" onclick="document.form_operation.operation_x.value='add';document.form_operation.submit();">
            </td>
        </table>
        <br>
        {% endif %}
        <table class="table3 w-100">
            <tr>
                <th colspan="3" class="w-100 pointer" {% with cabecera=session.columna %} {% include 'partials/cabecera_columna.html' %} {% endwith %}>
                    {% with cabecera=session.columna %}
                    Zona{% include 'partials/titulo_columna.html' %}
                    {% endwith %}
                </th>
            </tr>

            {% for zona in zonas %}
            <tr class="back{{forloop.counter|back_class}}">
                <td class="left w-80">
                    {{zona.zona}}
                </td>
                <td class="center w-10">
                    {%if permisos.modificar == 1 %}
                    {% with url_main=url_main url_id=zona.zona_id target='' %}
                    {% include 'partials/btn_modificar.html' %}
                    {% endwith %}
                    {% else %} &nbsp;
                    {% endif %}
                </td>
                <td class="center w-10">
                    {%if permisos.eliminar == 1 %}
                    {% with url_main=url_main url_id=zona.zona_id target='' %}
                    {% include 'partials/btn_eliminar.html' %}
                    {% endwith %}
                    {% else %} &nbsp;
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
        </table>
        <br>
        {% if permisos.adicionar == 1 %}
        <table class="tabla w-100">
            <td class="left w-100">
                <input type="submit" name="add_x2" value="Nueva Zona" class="btn btn-primary btn-sm" onclick="document.form_operation.operation_x.value='add';document.form_operation.submit();">
            </td>
        </table>
        <br>
        {% endif %}
    </div>
    <!--fin div contenedor-->
    <div class="col-sm-2">&nbsp;</div>
</div>

<BR><BR>
<form name="form_order" method="post" action="">
    {% csrf_token %}
    <input type="hidden" name="{{session.variable_order}}" value="{{session|get_item:session.variable_order}}">
    <input type="hidden" name="{{session.variable_order_type}}" value="{{session|get_item:session.variable_order_type}}">
</form>
<form name="form_operation" method="post" action="{{url_main}}">
    {% csrf_token %}
    <input type="hidden" name="operation_x" value="">
    <input type="hidden" name="id" value="">
</form>
</div>

{% endblock %}